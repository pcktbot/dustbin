(function(a,b){'object'===typeof exports&&'undefined'!==typeof module?module.exports=b():'function'===typeof define&&define.amd?define(b):a.ResizeObserver=b()})(this,function(){'use strict';function a(a){return parseFloat(a)||0}function b(b){for(var c=[],d=arguments.length-1;0<d--;)c[d]=arguments[d+1];return c.reduce(function(c,d){var e=b['border-'+d+'-width'];return c+a(e)},0)}function c(b){for(var c=['top','right','bottom','left'],d={},e=0,f=c;e<f.length;e+=1){var g=f[e],h=b['padding-'+g];d[g]=a(h)}return d}function d(a){var b=a.getBBox();return i(0,0,b.width,b.height)}function e(d){var e=Math.abs,g=Math.round,h=d.clientWidth,j=d.clientHeight;if(!h&&!j)return t;var k=s(d).getComputedStyle(d),l=c(k),m=l.left+l.right,n=l.top+l.bottom,o=a(k.width),p=a(k.height);if('border-box'===k.boxSizing&&(g(o+m)!==h&&(o-=b(k,'left','right')+m),g(p+n)!==j&&(p-=b(k,'top','bottom')+n)),!f(d)){var q=g(o+m)-h,r=g(p+n)-j;1!==e(q)&&(o-=q),1!==e(r)&&(p-=r)}return i(l.left,l.top,o,p)}function f(a){return a===s(a).document.documentElement}function g(a){return k?u(a)?d(a):e(a):t}function h(a){var b=a.x,c=a.y,d=a.width,e=a.height,f='undefined'===typeof DOMRectReadOnly?Object:DOMRectReadOnly,g=Object.create(f.prototype);return r(g,{x:b,y:c,width:d,height:e,top:c,right:b+d,bottom:e+c,left:b}),g}function i(a,b,c,d){return{x:a,y:b,width:c,height:d}}var j=function(){function a(a,b){var c=-1;return a.some(function(a,d){return a[0]===b&&(c=d,!0)}),c}return'undefined'===typeof Map?function(){function b(){this.__entries__=[]}var c={size:{configurable:!0}};return c.size.get=function(){return this.__entries__.length},b.prototype.get=function(b){var c=a(this.__entries__,b),d=this.__entries__[c];return d&&d[1]},b.prototype.set=function(b,c){var d=a(this.__entries__,b);~d?this.__entries__[d][1]=c:this.__entries__.push([b,c])},b.prototype.delete=function(b){var c=this.__entries__,d=a(c,b);~d&&c.splice(d,1)},b.prototype.has=function(b){return!!~a(this.__entries__,b)},b.prototype.clear=function(){this.__entries__.splice(0)},b.prototype.forEach=function(a,b){var c=this;void 0===b&&(b=null);for(var d,e=0,f=c.__entries__;e<f.length;e+=1)d=f[e],a.call(b,d[1],d[0])},Object.defineProperties(b.prototype,c),b}():Map}(),k='undefined'!==typeof window&&'undefined'!==typeof document&&window.document===document,l=function(){return'undefined'!==typeof global&&global.Math===Math?global:'undefined'!==typeof self&&self.Math===Math?self:'undefined'!==typeof window&&window.Math===Math?window:Function('return this')()}(),m=function(){return'function'===typeof requestAnimationFrame?requestAnimationFrame.bind(l):function(a){return setTimeout(function(){return a(Date.now())},1e3/60)}}(),n=function(a,b){function c(){f&&(f=!1,a()),g&&e()}function d(){m(c)}function e(){var a=Date.now();if(f){if(a-h<2)return;g=!0}else f=!0,g=!1,setTimeout(d,b);h=a}var f=!1,g=!1,h=0;return e},o=['top','right','bottom','left','width','height','size','weight'],p='undefined'!==typeof MutationObserver,q=function(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=n(this.refresh.bind(this),20)};q.prototype.addObserver=function(a){~this.observers_.indexOf(a)||this.observers_.push(a),this.connected_||this.connect_()},q.prototype.removeObserver=function(a){var b=this.observers_,c=b.indexOf(a);~c&&b.splice(c,1),!b.length&&this.connected_&&this.disconnect_()},q.prototype.refresh=function(){var a=this.updateObservers_();a&&this.refresh()},q.prototype.updateObservers_=function(){var a=this.observers_.filter(function(a){return a.gatherActive(),a.hasActive()});return a.forEach(function(a){return a.broadcastActive()}),0<a.length},q.prototype.connect_=function(){!k||this.connected_||(document.addEventListener('transitionend',this.onTransitionEnd_),window.addEventListener('resize',this.refresh),p?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener('DOMSubtreeModified',this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},q.prototype.disconnect_=function(){k&&this.connected_&&(document.removeEventListener('transitionend',this.onTransitionEnd_),window.removeEventListener('resize',this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener('DOMSubtreeModified',this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},q.prototype.onTransitionEnd_=function(a){var b=a.propertyName;void 0===b&&(b='');var c=o.some(function(a){return!!~b.indexOf(a)});c&&this.refresh()},q.getInstance=function(){return this.instance_||(this.instance_=new q),this.instance_},q.instance_=null;var r=function(a,b){for(var c,d=0,e=Object.keys(b);d<e.length;d+=1)c=e[d],Object.defineProperty(a,c,{value:b[c],enumerable:!1,writable:!1,configurable:!0});return a},s=function(a){var b=a&&a.ownerDocument&&a.ownerDocument.defaultView;return b||l},t=i(0,0,0,0),u=function(){return'undefined'===typeof SVGGraphicsElement?function(a){return a instanceof s(a).SVGElement&&'function'===typeof a.getBBox}:function(a){return a instanceof s(a).SVGGraphicsElement}}(),v=function(a){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=i(0,0,0,0),this.target=a};v.prototype.isActive=function(){var a=g(this.target);return this.contentRect_=a,a.width!==this.broadcastWidth||a.height!==this.broadcastHeight},v.prototype.broadcastRect=function(){var a=this.contentRect_;return this.broadcastWidth=a.width,this.broadcastHeight=a.height,a};var w=function(a,b){var c=h(b);r(this,{target:a,contentRect:c})},x=function(a,b,c){if(this.activeObservations_=[],this.observations_=new j,'function'!==typeof a)throw new TypeError('The callback provided as parameter 1 is not a function.');this.callback_=a,this.controller_=b,this.callbackCtx_=c};x.prototype.observe=function(a){if(!arguments.length)throw new TypeError('1 argument required, but only 0 present.');if('undefined'!==typeof Element&&Element instanceof Object){if(!(a instanceof s(a).Element))throw new TypeError('parameter 1 is not of type "Element".');var b=this.observations_;b.has(a)||(b.set(a,new v(a)),this.controller_.addObserver(this),this.controller_.refresh())}},x.prototype.unobserve=function(a){if(!arguments.length)throw new TypeError('1 argument required, but only 0 present.');if('undefined'!==typeof Element&&Element instanceof Object){if(!(a instanceof s(a).Element))throw new TypeError('parameter 1 is not of type "Element".');var b=this.observations_;b.has(a)&&(b.delete(a),!b.size&&this.controller_.removeObserver(this))}},x.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},x.prototype.gatherActive=function(){var a=this;this.clearActive(),this.observations_.forEach(function(b){b.isActive()&&a.activeObservations_.push(b)})},x.prototype.broadcastActive=function(){if(this.hasActive()){var a=this.callbackCtx_,b=this.activeObservations_.map(function(a){return new w(a.target,a.broadcastRect())});this.callback_.call(a,b,a),this.clearActive()}},x.prototype.clearActive=function(){this.activeObservations_.splice(0)},x.prototype.hasActive=function(){return 0<this.activeObservations_.length};var y='undefined'===typeof WeakMap?new j:new WeakMap,z=function(a){if(!(this instanceof z))throw new TypeError('Cannot call a class as a function.');if(!arguments.length)throw new TypeError('1 argument required, but only 0 present.');var b=q.getInstance(),c=new x(a,b,this);y.set(this,c)};['observe','unobserve','disconnect'].forEach(function(a){z.prototype[a]=function(){return(b=y.get(this))[a].apply(b,arguments);var b}});var A=function(){return'undefined'===typeof l.ResizeObserver?(l.ResizeObserver=z,z):l.ResizeObserver}();return A});