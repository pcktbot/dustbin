<html><head><link rel="import" href="/bower_components/polymer/polymer-element.html"><link rel="import" href="/bower_components/iron-icons/iron-icons.html"><link rel="import" href="/bower_components/paper-toast/paper-toast.html"><link rel="import" href="app-header.html"><link rel="import" href="app-about.html"><link rel="import" href="web-dash.html"></head><body><dom-module id="my-app"><template><style>:host{display:block;color:white;--paper-tooltip-background:rgba(0, 0, 0, 0.9);--paper-tooltip:{font-size:15px;padding:10px;};--paper-toast-background-color:#677780;--paper-toast:{padding:3px 14px;margin:0;};}h1{margin-top:0;margin-bottom:10px;}h3{margin-top:0;color:rgba(255, 255, 255, 0.5);}.toast-button{color:white;font-weight:bold;}paper-toast{display:flex;align-items:center;justify-content:space-between;position:relative;z-index:10000;}</style><app-header app-name="{{appName}}" app-path="{{appPath}}"></app-header><web-dash></web-dash><app-about></app-about><paper-toast duration="6000" id="toast"><paper-button class="toast-button" on-click="_reload">Reload</paper-button></paper-toast></template><script>Polymer.setPassiveTouchGestures(!0);class MyApp extends Polymer.Element{static get is(){return'my-app'}static get properties(){return{rootPath:String}}ready(){super.ready(),this.backend=new Backend('webdash'),this._registerServiceWorker(),this._getInfo(),this._getConfig()}_reload(){requestAnimationFrame(()=>{window.location.reload()})}_getInfo(){this.backend.get('info').then((a)=>{this.appName=a.appName,this.appPath=a.appPath,this.version=a.version,window.dispatchEvent(new CustomEvent('webdash-info',{detail:a})),setTimeout(()=>{window.gtag&&gtag('event','version',{event_label:this.version})},3e3)})}_getConfig(){this.backend.get('config').then((a)=>{window.webdashConfig=a.config})}_registerServiceWorker(){'serviceWorker'in navigator&&window.addEventListener('load',()=>{navigator.serviceWorker.register('service-worker.js',{scope:Polymer.rootPath}).then((a)=>{a.onupdatefound=()=>{const b=a.installing;b.onstatechange=()=>{switch(b.state){case'installed':if(navigator.serviceWorker.controller){const a=this.$.toast;a.text='New version available',a.open()}}}}})})}}window.customElements.define(MyApp.is,MyApp);</script></dom-module></body></html>